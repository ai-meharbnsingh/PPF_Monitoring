###############################################################################
# mosquitto_windows.conf
# Eclipse Mosquitto 2 — Native Windows configuration for PPF Workshop System
#
# Use this config when running Mosquitto directly on Windows (NOT in Docker).
# This bypasses Docker Desktop's port forwarding limitation that blocks
# external LAN connections from reaching the Dockerized broker.
#
# Run with:
#   "C:\Program Files\mosquitto\mosquitto.exe" -c "D:\Meharban\PPF_Factory\docker\mosquitto\mosquitto_windows.conf" -v
###############################################################################

# ─── Persistence ──────────────────────────────────────────────────────────────
persistence true
persistence_location D:\Meharban\PPF_Factory\docker\mosquitto\data\

# ─── Logging ──────────────────────────────────────────────────────────────────
log_dest file D:\Meharban\PPF_Factory\docker\mosquitto\log\mosquitto_native.log
log_dest stdout
log_type error
log_type warning
log_type notice
log_type information
log_timestamp true
log_timestamp_format %Y-%m-%dT%H:%M:%S

# ─── Listener: plain MQTT (1883) ─────────────────────────────────────────────
listener 1883
protocol mqtt

# ─── Listener: MQTT over WebSocket (9001) ─────────────────────────────────────
listener 9001
protocol websockets

# ─── Authentication ───────────────────────────────────────────────────────────
password_file D:\Meharban\PPF_Factory\docker\mosquitto\passwd

# Disable anonymous access — all connections must authenticate
allow_anonymous false

# ─── Message size ────────────────────────────────────────────────────────────
message_size_limit 65536

# ─── Connection settings ─────────────────────────────────────────────────────
max_inflight_messages 20

# ─── Retained messages ────────────────────────────────────────────────────────
retain_available true

# ─── Queue settings ──────────────────────────────────────────────────────────
max_queued_messages 1000
