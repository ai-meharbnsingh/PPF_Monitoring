# Mosquitto ACL — Topic-level Access Control
# ─────────────────────────────────────────────────────────────────────────────
# Uncomment acl_file line in mosquitto.conf to enable.
#
# Pattern variables:
#   %u = username of connecting client
#   %c = client ID
#
# Format:
#   user <username>
#   topic [read|write|readwrite] <topic>
# ─────────────────────────────────────────────────────────────────────────────

# ── ppf_backend: full access to all workshop topics ──────────────────────────
user ppf_backend
topic readwrite workshop/#
topic readwrite $SYS/#

# ── mqtt_user (ESP32 devices): publish sensors + status; subscribe commands ──
user mqtt_user
# Publish sensor readings
topic write workshop/+/pit/+/sensors
# Publish device status (LWT + heartbeat)
topic write workshop/+/device/+/status
# Subscribe to commands from backend
topic read workshop/+/device/+/command

# ── health: minimal access for probe ─────────────────────────────────────────
user health
topic readwrite health
